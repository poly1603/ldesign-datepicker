# 国际化

LDesign DatePicker 内置了完整的国际化支持，包括多语言包和自定义配置。

## 内置语言

目前支持以下语言：

- 简体中文（zh-CN）
- 英语（en-US）
- 日语（ja-JP）
- 西班牙语（es-ES）
- 法语（fr-FR）
- 德语（de-DE）

## 使用内置语言

### Vue 3

```vue
<script setup>
import { ref } from 'vue';
import { DatePicker } from '@ldesign/datepicker-vue';
import { zhCN, enUS, jaJP } from '@ldesign/datepicker-shared';

const date = ref(null);
</script>

<template>
  <!-- 中文 -->
  <DatePicker v-model="date" :locale="zhCN" />
  
  <!-- 英文 -->
  <DatePicker v-model="date" :locale="enUS" />
  
  <!-- 日文 -->
  <DatePicker v-model="date" :locale="jaJP" />
</template>
```

### React

```tsx
import { useState } from 'react';
import { DatePicker } from '@ldesign/datepicker-react';
import { enUS, zhCN } from '@ldesign/datepicker-shared';

function App() {
  const [date, setDate] = useState(null);
  
  return (
    <>
      {/* 英文 */}
      <DatePicker value={date} onChange={setDate} locale={enUS} />
      
      {/* 中文 */}
      <DatePicker value={date} onChange={setDate} locale={zhCN} />
    </>
  );
}
```

## 全局配置

### Vue 3 插件配置

```ts
import { createApp } from 'vue';
import LDatePicker from '@ldesign/datepicker-vue';
import { zhCN } from '@ldesign/datepicker-shared';
import App from './App.vue';

const app = createApp(App);

app.use(LDatePicker, {
  locale: zhCN,
});

app.mount('#app');
```

### React Context 配置

```tsx
import { createContext, useContext } from 'react';
import { zhCN } from '@ldesign/datepicker-shared';
import type { Locale } from '@ldesign/datepicker-shared';

const LocaleContext = createContext<Locale>(zhCN);

export function LocaleProvider({ children, locale }) {
  return (
    <LocaleContext.Provider value={locale}>
      {children}
    </LocaleContext.Provider>
  );
}

export function useDatePickerLocale() {
  return useContext(LocaleContext);
}
```

## 自定义语言

创建自定义语言配置：

```ts
import type { Locale } from '@ldesign/datepicker-shared';

const myLocale: Locale = {
  name: 'my-locale',
  
  // 星期名称（完整）
  weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
  
  // 星期名称（短）
  weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  
  // 星期名称（最小）
  weekdaysMin: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  
  // 月份名称（完整）
  months: [
    'January', 'February', 'March', 'April',
    'May', 'June', 'July', 'August',
    'September', 'October', 'November', 'December'
  ],
  
  // 月份名称（短）
  monthsShort: [
    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
  ],
  
  // 一周的第一天（0=周日, 1=周一）
  firstDayOfWeek: 0,
  
  // 格式化字符串
  formats: {
    date: 'MM/DD/YYYY',
    datetime: 'MM/DD/YYYY HH:mm:ss',
    time: 'HH:mm:ss',
    month: 'MM/YYYY',
    year: 'YYYY',
    quarter: '[Q]Q YYYY',
  },
  
  // 上午/下午
  meridiem: {
    am: 'AM',
    pm: 'PM',
  },
  
  // 序数词（可选）
  ordinal: (n: number) => {
    const s = ['th', 'st', 'nd', 'rd'];
    const v = n % 100;
    return n + (s[(v - 20) % 10] || s[v] || s[0]);
  },
};
```

使用自定义语言：

```vue
<DatePicker :locale="myLocale" />
```

## 语言包结构

### Locale 接口

```ts
interface Locale {
  // 语言标识
  name: string;
  
  // 星期名称
  weekdays: string[];      // ['Sunday', 'Monday', ...]
  weekdaysShort: string[]; // ['Sun', 'Mon', ...]
  weekdaysMin: string[];   // ['Su', 'Mo', ...]
  
  // 月份名称
  months: string[];        // ['January', 'February', ...]
  monthsShort: string[];   // ['Jan', 'Feb', ...]
  
  // 一周的第一天
  firstDayOfWeek: 0 | 1 | 2 | 3 | 4 | 5 | 6;
  
  // 格式化配置
  formats: {
    date: string;
    datetime: string;
    time: string;
    month: string;
    year: string;
    quarter: string;
  };
  
  // 上午/下午
  meridiem: {
    am: string;
    pm: string;
  };
  
  // 序数词（可选）
  ordinal?: (n: number) => string;
}
```

## 动态切换语言

### Vue 示例

```vue
<template>
  <div>
    <select v-model="currentLocale">
      <option value="zh-CN">简体中文</option>
      <option value="en-US">English</option>
      <option value="ja-JP">日本語</option>
    </select>
    
    <DatePicker v-model="date" :locale="locale" />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';
import { zhCN, enUS, jaJP } from '@ldesign/datepicker-shared';

const currentLocale = ref('zh-CN');
const date = ref(null);

const locales = {
  'zh-CN': zhCN,
  'en-US': enUS,
  'ja-JP': jaJP,
};

const locale = computed(() => locales[currentLocale.value]);
</script>
```

### React 示例

```tsx
import { useState, useMemo } from 'react';
import { DatePicker } from '@ldesign/datepicker-react';
import { zhCN, enUS, jaJP } from '@ldesign/datepicker-shared';

function App() {
  const [currentLocale, setCurrentLocale] = useState('zh-CN');
  const [date, setDate] = useState(null);
  
  const locales = {
    'zh-CN': zhCN,
    'en-US': enUS,
    'ja-JP': jaJP,
  };
  
  const locale = useMemo(
    () => locales[currentLocale],
    [currentLocale]
  );
  
  return (
    <div>
      <select
        value={currentLocale}
        onChange={(e) => setCurrentLocale(e.target.value)}
      >
        <option value="zh-CN">简体中文</option>
        <option value="en-US">English</option>
        <option value="ja-JP">日本語</option>
      </select>
      
      <DatePicker value={date} onChange={setDate} locale={locale} />
    </div>
  );
}
```

## 区域设置

### 周起始日

不同地区的周起始日不同：

```ts
// 美国：周日为一周的第一天
const usLocale: Locale = {
  ...enUS,
  firstDayOfWeek: 0,
};

// 中国：周一为一周的第一天
const cnLocale: Locale = {
  ...zhCN,
  firstDayOfWeek: 1,
};
```

### 日期格式

不同地区的日期格式偏好：

```ts
// 美国格式：MM/DD/YYYY
const usFormat = 'MM/DD/YYYY';

// 欧洲格式：DD/MM/YYYY
const euFormat = 'DD/MM/YYYY';

// 中国格式：YYYY-MM-DD
const cnFormat = 'YYYY-MM-DD';

// ISO 格式：YYYY-MM-DD
const isoFormat = 'YYYY-MM-DD';
```

## 贡献语言包

欢迎贡献更多语言包！请参考：

1. 复制 `packages/shared/src/locales/en-us.ts`
2. 修改为你的语言
3. 在 `packages/shared/src/locales/index.ts` 中导出
4. 提交 Pull Request

语言包文件命名规范：`[language]-[COUNTRY].ts`（如 `zh-cn.ts`、`en-us.ts`）

## 最佳实践

1. **保持一致性**：在整个应用中使用相同的语言配置
2. **懒加载**：按需加载语言包以减少打包体积
3. **备用语言**：提供备用语言以防用户语言不可用
4. **测试**：测试所有支持的语言以确保正确显示

```ts
// 懒加载语言包示例
const loadLocale = async (lang: string) => {
  switch (lang) {
    case 'zh-CN':
      return (await import('@ldesign/datepicker-shared')).zhCN;
    case 'en-US':
      return (await import('@ldesign/datepicker-shared')).enUS;
    case 'ja-JP':
      return (await import('@ldesign/datepicker-shared')).jaJP;
    default:
      return (await import('@ldesign/datepicker-shared')).enUS;
  }
};
```




